<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="CSSsign_upCSS.css" />
  <title>Preze's Grooming Haven</title>
</head>
<body>
  <img src="backg.jpg">
<main>
  <div class="Signup-div">
    SIGN UP
  </div>
  <div class="first-last-div">
    <div class="user-div">
      <input class="firstname" type="text" name="firstName">
      <p class="userP">First Name</p>
    </div>
    <div class="user-div">
      <input class="lastname" type="text" name="lastName">
      <p class="userP">Last Name</p>
    </div>
  </div>
  <div class="user-div">
    <input class="UI" type="email" name="email">
    <p class="userP">Email</p>
  </div>
  <div class="user-div">
    <input class="UI" type="text" name="username">
    <p class="userP">Username</p>
  </div>
  <div class="pass-div">
    <input class="UI" type="password" name="password">
    <p class="passP">Password</p>
  </div> 
  <div>
    <button class="Signup-butt" id="signupButton">Sign up</button>
  </div>
  <div class="Register-div">
    You already have an account?<a href="Sign_in.html"> Sign in</a>
  </div>
</main>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    console.log("DOMContentLoaded event fired.");
    const signupButton = document.getElementById('signupButton');
    console.log("signupButton:", signupButton);

    signupButton.addEventListener('click', function () {
      console.log("Signup button clicked.");
      const firstNameInput = document.querySelector('.firstname');
      const lastNameInput = document.querySelector('.lastname');
      const emailInput = document.querySelector('.UI[type="email"]');
      const usernameInput = document.querySelector('.UI[type="text"]');
      const passwordInput = document.querySelector('.UI[type="password"]');

      const formData = {
        firstName: firstNameInput.value,
        lastName: lastNameInput.value,
        email: emailInput.value,
        username: usernameInput.value,
        password: passwordInput.value
      };
      console.log("formData:", formData);

      fetch('register.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(formData),
        })
        .then(response => response.json())
        .then(data => {
          console.log("Registration response:", data);
          if (data.success) {
            window.location.href = 'Sign_in.html';
          } else {
            alert(data.message);
          }
        })
        .catch(error => console.error('Error during registration:', error));
    });
  });
</script>

</body>
</html>
